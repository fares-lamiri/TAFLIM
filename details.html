<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAFLIM | ØªÙØ§ØµÙŠÙ„</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --accent: #ff3b3b;
            --bg: #0b0f12;
            --card: #1a1f25;
            --text: #e6e6e6;
            --secondary: #888;
            --font-main: 'Tajawal', system-ui;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: var(--font-main);
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        /* ========== Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± ========== */
        .navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 20px;
            background: rgba(11, 15, 18, 0.95);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 59, 59, 0.3);
        }

        .logo {
            font-size: 2rem;
            font-weight: 900;
            color: var(--accent);
            text-shadow: 0 2px 10px rgba(255, 59, 59, 0.3);
            cursor: pointer;
        }

        .nav-links {
            display: flex;
            gap: 30px;
        }

        .nav-links a {
            color: var(--text);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s;
            font-size: 1.1rem;
        }

        .nav-links a:hover {
            color: var(--accent);
        }

        /* ========== Ù‚Ø³Ù… Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ========== */
        .detail-hero {
            display: flex;
            gap: 40px;
            padding: 40px 5%;
            max-width: 1400px;
            margin: 0 auto;
            flex-wrap: wrap;
        }

        .poster-container {
            flex: 0 0 300px;
            position: relative;
        }

        #detail-poster {
            width: 100%;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
            transition: transform 0.3s;
        }

        .poster-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent);
            color: white;
            padding: 8px 15px;
            border-radius: 30px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .detail-info {
            flex: 1;
            min-width: 300px;
        }

        #detail-title {
            font-size: 2.8rem;
            margin-bottom: 15px;
            color: white;
            line-height: 1.2;
        }

        .detail-meta {
            display: flex;
            gap: 25px;
            margin-bottom: 25px;
            color: var(--secondary);
            font-size: 1.1rem;
            flex-wrap: wrap;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .rating {
            color: #ffd700;
            font-weight: bold;
        }

        #detail-description {
            font-size: 1.2rem;
            line-height: 1.8;
            margin-bottom: 35px;
            color: #ccc;
            max-width: 800px;
        }

        /* ========== Ø£Ù‚Ø³Ø§Ù… Ø¥Ø¶Ø§ÙÙŠØ© ========== */
        .detail-section {
            background: rgba(26, 31, 37, 0.7);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 5%;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }

        .section-title {
            font-size: 1.8rem;
            color: var(--accent);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 59, 59, 0.3);
        }

        /* ========== Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ø­Ù„Ù‚Ø§Øª ========== */
        .episodes-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: flex-end;
        }

        .episodes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .control-btn {
            background: var(--card);
            color: var(--text);
            border: 1px solid #333;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: var(--font-main);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 1.1rem;
            min-width: 60px;
            min-height: 60px;
        }

        .control-btn:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
            transform: scale(1.05);
        }

        /* ========== Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ========== */
        .action-buttons {
            display: flex;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
            position: relative;
        }

        .btn {
            padding: 16px 35px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            min-width: 180px;
            font-family: var(--font-main);
        }

        .watch-btn {
            background: var(--accent);
            color: white;
            box-shadow: 0 5px 20px rgba(255, 59, 59, 0.3);
        }

        .watch-btn:hover {
            background: #ff0000;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 59, 59, 0.5);
        }

        .download-btn {
            background: transparent;
            color: var(--accent);
            border: 2px solid var(--accent);
        }

        .download-btn:hover {
            background: var(--accent);
            color: white;
            transform: translateY(-3px);
        }

        /* ========== Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Ù…Ø¯Ù…Ø¬Ø©) ========== */
        .servers-dropdown {
            position: absolute;
            top: calc(100% + 10px);
            right: 0;
            background: var(--card);
            border-radius: 15px;
            padding: 20px;
            width: 350px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 100;
            border: 1px solid rgba(255, 59, 59, 0.3);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .servers-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .servers-dropdown-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 59, 59, 0.3);
        }

        .servers-dropdown-title {
            font-size: 1.3rem;
            color: var(--accent);
        }

        .servers-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .server-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.3);
            padding: 12px 15px;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .server-item:hover {
            background: rgba(255, 59, 59, 0.1);
            border-color: var(--accent);
        }

        .server-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .server-quality {
            background: var(--accent);
            color: white;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: bold;
        }

        .server-name {
            font-weight: bold;
        }

        .server-action-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s;
            font-family: var(--font-main);
            font-size: 0.9rem;
        }

        .server-action-btn:hover {
            background: #ff0000;
        }

        /* ========== Ù‚Ø³Ù… Ø§Ù„Ø­Ù„Ù‚Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯ ========== */
        .episodes-main-container {
            display: flex;
            gap: 30px;
            margin-top: 20px;
        }

        .episodes-list-container {
            flex: 1;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            max-height: 600px;
            overflow-y: auto;
        }

        .episodes-scroll-indicator {
            position: sticky;
            top: 0;
            background: linear-gradient(to bottom, rgba(26, 31, 37, 1), transparent);
            padding: 10px 0;
            text-align: center;
            color: var(--accent);
            font-size: 0.9rem;
            z-index: 1;
        }

        .episodes-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .episode-list-item {
            background: var(--card);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .episode-list-item:hover {
            background: rgba(255, 59, 59, 0.1);
            border-color: var(--accent);
            transform: translateX(-5px);
        }

        .episode-list-item.active {
            background: rgba(255, 59, 59, 0.2);
            border-color: var(--accent);
        }

        .episode-number {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--accent);
            min-width: 80px;
        }

        .episode-title {
            font-weight: bold;
            flex: 1;
            margin: 0 15px;
        }

        .episode-meta {
            color: var(--secondary);
            font-size: 0.9rem;
            min-width: 150px;
            text-align: left;
        }

        /* ========== Ù‚Ø³Ù… Ø§Ù„Ù…ÙˆØ§Ø³Ù… ÙˆØ§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª ========== */
        .seasons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .season-card {
            background: var(--card);
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            color: inherit;
        }

        .season-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 59, 59, 0.3);
        }

        .season-card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .season-info {
            padding: 15px;
        }

        .season-title {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }

        .season-meta {
            color: var(--secondary);
            font-size: 0.9rem;
        }

        /* ========== Ù‚Ø³Ù… Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù„Ù„Ø£ÙÙ„Ø§Ù… ========== */
        .download-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .download-card {
            background: var(--card);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #333;
            transition: transform 0.3s;
        }

        .download-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent);
        }

        .quality-badge {
            background: var(--accent);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 10px;
            display: inline-block;
        }

        /* ========== Ù‚Ø³Ù… Ø§Ù„ØªØ±ÙŠÙ„Ø± ========== */
        .trailer-section {
            margin-top: 30px;
        }

        .trailer-container {
            position: relative;
            width: 100%;
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
            border-radius: 15px;
            overflow: hidden;
            background: #000;
        }

        #trailer-iframe {
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* ========== Ø§Ù„ØªÙˆØµÙŠØ§Øª ========== */
        .recommendations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .rec-card {
            background: var(--card);
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            color: inherit;
        }

        .rec-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 59, 59, 0.3);
        }

        .rec-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .rec-info {
            padding: 15px;
        }

        .rec-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        /* ========== Ø§Ù„ÙÙˆØªØ± ========== */
        footer {
            text-align: center;
            padding: 30px;
            margin-top: 50px;
            background: #000;
            color: #aaa;
            border-top: 1px solid #333;
        }

        /* ========== Ø§Ù„ØªØ¬Ø§ÙˆØ¨ ========== */
        @media (max-width: 768px) {
            .detail-hero {
                flex-direction: column;
                padding: 20px;
            }

            .poster-container {
                flex: none;
                max-width: 300px;
                margin: 0 auto;
            }

            #detail-title {
                font-size: 2rem;
                text-align: center;
            }

            .detail-meta {
                justify-content: center;
            }

            .action-buttons {
                justify-content: center;
            }

            .btn {
                min-width: 150px;
                padding: 14px 25px;
            }

            .nav-links {
                display: none;
            }

            .detail-section {
                margin: 20px;
                padding: 20px;
            }

            .episodes-main-container {
                flex-direction: column;
            }

            .episodes-list-container {
                max-height: 400px;
            }
            
            .episode-list-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .episode-number, .episode-title, .episode-meta {
                width: 100%;
                text-align: right;
            }
            
            .episode-meta {
                min-width: auto;
            }
            
            .servers-dropdown {
                width: 300px;
                right: 50%;
                transform: translateX(50%) translateY(-10px);
            }
            
            .servers-dropdown.active {
                transform: translateX(50%) translateY(0);
            }
            
            .seasons-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }

        @media (max-width: 480px) {
            #detail-title {
                font-size: 1.6rem;
            }

            .btn {
                width: 100%;
                max-width: 250px;
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .episodes-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .episodes-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .servers-dropdown {
                width: 280px;
            }
            
            .server-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .server-info {
                width: 100%;
                justify-content: space-between;
            }
            
            .server-action-btn {
                width: 100%;
            }
            
            .control-btn {
                min-width: 50px;
                min-height: 50px;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
    <header class="navbar">
        <div class="logo" onclick="window.location.href='index.html'">TAFLIM</div>
        <nav class="nav-links">
            <a href="index.html">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="movies.html">ğŸ¬ Ø§Ù„Ø£ÙÙ„Ø§Ù…</a>
            <a href="series.html">ğŸ“º Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª</a>
            <a href="anime.html">ğŸ‡¯ğŸ‡µ Ø§Ù„Ø£Ù†Ù…ÙŠ</a>
        </nav>
    </header>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <main>
        <!-- Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
        <div class="detail-hero">
            <div class="poster-container">
                <img id="detail-poster" src="" alt="Poster">
                <div class="poster-badge" id="type-badge">ÙÙŠÙ„Ù…</div>
            </div>
            
            <div class="detail-info">
                <h1 id="detail-title"></h1>
                
                <div class="detail-meta" id="detail-meta">
                    <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                </div>
                
                <p id="detail-description"></p>
                
                <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù…Ø¹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© -->
                <div class="action-buttons">
                    <button id="watch-btn" class="btn watch-btn">â–¶ Ø´Ø§Ù‡Ø¯ Ø§Ù„Ø¢Ù†</button>
                    <button id="download-btn" class="btn download-btn">â¬‡ ØªØ­Ù…ÙŠÙ„</button>
                    
                    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Ù„Ù„Ø£ÙÙ„Ø§Ù… ÙÙ‚Ø·) -->
                    <div id="servers-dropdown" class="servers-dropdown">
                        <div class="servers-dropdown-header">
                            <h3 class="servers-dropdown-title">Ø§Ø®ØªØ± Ø³ÙŠØ±ÙØ± Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</h3>
                        </div>
                        <div class="servers-list" id="servers-list">
                            <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„ØªØ±ÙŠÙ„Ø± -->
        <div class="detail-section trailer-section">
            <h3 class="section-title">Ø§Ù„ØªØ±ÙŠÙ„Ø± Ø§Ù„Ø±Ø³Ù…ÙŠ</h3>
            <div class="trailer-container">
                <iframe id="trailer-iframe" allowfullscreen></iframe>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„ØªØ­Ù…ÙŠÙ„ (Ù„Ù„Ø£ÙÙ„Ø§Ù… ÙÙ‚Ø·) -->
        <div id="movie-download-section" class="detail-section" style="display:none;">
            <h3 class="section-title">Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„</h3>
            <div class="download-options" id="download-options">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ø­Ù„Ù‚Ø§Øª (Ù„Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª ÙˆØ§Ù„Ø£Ù†Ù…ÙŠ ÙÙ‚Ø·) -->
        <div id="episodes-section" class="detail-section" style="display:none;">
            <div class="episodes-header">
                <h3 class="section-title">Ø§Ù„Ø­Ù„Ù‚Ø§Øª</h3>
                <div class="episodes-controls">
                    <button id="reverse-order-btn" class="control-btn" title="Ø¹ÙƒØ³ ØªØ±ØªÙŠØ¨ Ø§Ù„Ø­Ù„Ù‚Ø§Øª">
                        <i class="fas fa-sort-amount-down fa-lg"></i>
                    </button>
                </div>
            </div>
            
            <div class="episodes-main-container">
                <div class="episodes-list-container">
                    <div class="episodes-scroll-indicator" id="scroll-indicator">
                        Ø§Ø³Ø­Ø¨ Ù„Ø£Ø¹Ù„Ù‰/Ø£Ø³ÙÙ„ Ù„Ù„ØªØµÙØ­
                    </div>
                    <div class="episodes-list" id="episodes-list">
                        <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„Ù…ÙˆØ§Ø³Ù… Ø§Ù„Ø£Ø®Ø±Ù‰ (Ù„Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª ÙˆØ§Ù„Ø£Ù†Ù…ÙŠ) -->
        <div id="other-seasons-section" class="detail-section" style="display:none;">
            <h3 class="section-title">Ù…ÙˆØ§Ø³Ù… Ø£Ø®Ø±Ù‰ ÙˆØ¥ØµØ¯Ø§Ø±Ø§Øª</h3>
            <div class="seasons-grid" id="seasons-grid">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ø§Ù„ØªÙˆØµÙŠØ§Øª -->
        <div class="detail-section">
            <h3 class="section-title">Ù‚Ø¯ ÙŠØ¹Ø¬Ø¨Ùƒ Ø£ÙŠØ¶Ø§Ù‹</h3>
            <div class="recommendations-grid" id="recommendations-grid">
                <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¨Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª -->
            </div>
        </div>
    </main>

    <!-- Ø§Ù„ÙÙˆØªØ± Ù…Ø¹ Ù†Ø³Ø¨Ø© TMDb -->
    <footer>
        <div class="footer-content">
            <p>Â© 2025 TAFLIM - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
            <p class="footer-tagline">ğŸï¸ ÙˆØ¬Ù‡ØªÙƒ Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø£ÙØ¶Ù„ Ø§Ù„Ø£ÙÙ„Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª</p>
            <!-- Ù†Ø³Ø¨Ø© TMDb Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© -->
            <p style="margin-top: 10px; font-size: 0.8em; color: #666;">
                Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ ÙŠØ³ØªØ®Ø¯Ù… ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© ØªØ·Ø¨ÙŠÙ‚Ø§Øª TMDB ÙˆÙ„ÙƒÙ†Ù‡ ØºÙŠØ± Ù…Ø¹ØªÙ…Ø¯ Ø£Ùˆ Ù…Ø¹ØªÙ…Ø¯ Ù…Ù† Ù‚Ø¨Ù„ TMDb.
                <img src="https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_2-d537fb228cf3ded904ef09b136fe3fec72548ebc1fea3fbbd1ad9e36364db38b.svg" alt="TMDb Logo" style="height: 20px; vertical-align: middle; margin-right: 5px;">
            </p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
// ========== TAFLIM - ØµÙØ­Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ© ==========

// ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª API =====
const TMDB_KEY = "dbb14198ea29a547de77343dc3fe7a37";
const OMDB_KEY = "6584b042";
const CUSTOM_API_KEY = "OxatsNqfOlchppjmnwDGXWmBQ1Ff9hAh72nVVdoz";
const IMAGE_BASE = "https://image.tmdb.org/t/p/w500";

// ===== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… =====
const params = new URLSearchParams(window.location.search);
const mediaType = params.get("type") || "movie";
const mediaId = params.get("id");

// ===== Ù†Ø¸Ø§Ù… Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…Ø­Ø³Ù† =====
const LANGUAGE_CONFIG = {
    "ko": { 
        language: "ar-SA", 
        flag: "ğŸ‡°ğŸ‡·", 
        name: "ÙƒÙˆØ±ÙŠ", 
        displayLang: "ar",
        isArabicTitle: true,
        priorityArabic: true
    },
    "hi": { 
        language: "ar-SA", 
        flag: "ğŸ‡®ğŸ‡³", 
        name: "Ù‡Ù†Ø¯ÙŠ", 
        displayLang: "ar",
        isArabicTitle: true,
        priorityArabic: false
    },
    "tr": { 
        language: "ar-SA", 
        flag: "ğŸ‡¹ğŸ‡·", 
        name: "ØªØ±ÙƒÙŠ", 
        displayLang: "ar",
        isArabicTitle: true,
        priorityArabic: false
    },
    "zh": { 
        language: "ar-SA", 
        flag: "ğŸ‡¨ğŸ‡³", 
        name: "ØµÙŠÙ†ÙŠ", 
        displayLang: "ar",
        isArabicTitle: true,
        priorityArabic: false
    },
    "ja": { 
        language: "ja-JP", 
        flag: "ğŸ‡¯ğŸ‡µ", 
        name: "ÙŠØ§Ø¨Ø§Ù†ÙŠ", 
        displayLang: "romanji",
        isArabicTitle: false,
        priorityArabic: false
    },
    "ar": { 
        language: "ar-SA", 
        flag: "ğŸ‡¸ğŸ‡¦", 
        name: "Ø¹Ø±Ø¨ÙŠ", 
        displayLang: "ar",
        isArabicTitle: true,
        priorityArabic: false
    },
    "th": { 
        language: "ar-SA", 
        flag: "ğŸ‡¹ğŸ‡­", 
        name: "ØªØ§ÙŠÙ„Ù†Ø¯ÙŠ", 
        displayLang: "ar",
        isArabicTitle: true,
        priorityArabic: false
    },
    "vi": { 
        language: "ar-SA", 
        flag: "ğŸ‡»ğŸ‡³", 
        name: "ÙÙŠØªÙ†Ø§Ù…ÙŠ", 
        displayLang: "ar",
        isArabicTitle: true,
        priorityArabic: false
    },
    "default": { 
        language: "en-US", 
        flag: "ğŸŒ", 
        name: "Ø£Ø¬Ù†Ø¨ÙŠ", 
        displayLang: "en",
        isArabicTitle: false,
        priorityArabic: false
    }
};

// Ù‚Ø§Ù…ÙˆØ³ Ø§Ù„ØªØ±Ø¬Ù…Ø§Øª Ø§Ù„Ù…ÙˆØ³Ø¹
const TITLE_TRANSLATIONS = {
    "Squid Game": "Ù„Ø¹Ø¨Ø© Ø§Ù„Ø­Ø¨Ø§Ø±",
    "Vincenzo": "ÙÙŠÙ†Ø³Ù†Ø²Ùˆ",
    "Crash Landing on You": "Ù‡Ø¨ÙˆØ· Ø§Ø¶Ø·Ø±Ø§Ø±ÙŠ",
    "Goblin": "Ø§Ù„ØºÙˆØ¨Ù„ÙŠÙ†",
    "The Glory": "Ø§Ù„Ù…Ø¬Ø¯",
    "Descendants of the Sun": "Ø£Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø´Ù…Ø³",
    "Itaewon Class": "ÙØ¦Ø© Ø¥ÙŠØªØ§ÙˆÙ†",
    "Business Proposal": "Ø§Ù‚ØªØ±Ø§Ø­ Ø¹Ù…Ù„",
    "Hometown Cha-Cha-Cha": "Ù…ÙˆØ·Ù† ØªØ´Ø§ ØªØ´Ø§ ØªØ´Ø§",
    "Mr. Sunshine": "Ø§Ù„Ø³ÙŠØ¯ Ø´Ø§ÙŠÙ†",
    "Reply 1988": "Ø±Ø¯ 1988",
    "Hospital Playlist": "Ù‚Ø§Ø¦Ù…Ø© Ù…Ø³ØªØ´ÙÙ‰",
    "Extraordinary Attorney Woo": "Ø§Ù„Ù…Ø­Ø§Ù…ÙŠØ© ÙˆÙˆ Ø§Ù„Ø´Ø§Ø·Ø±Ø©",
    "The King's Affection": "Ø¹Ø§Ø·ÙØ© Ø§Ù„Ù…Ù„Ùƒ",
    "Alchemy of Souls": "ÙƒÙŠÙ…ÙŠØ§Ø¡ Ø§Ù„Ø£Ø±ÙˆØ§Ø­",
    "Twenty Five Twenty One": "Ø®Ù…Ø³Ø© ÙˆØ¹Ø´Ø±ÙˆÙ† ÙˆØ§Ø­Ø¯ ÙˆØ¹Ø´Ø±ÙˆÙ†",
    
    "RRR": "Ø¢Ø± Ø¢Ø± Ø¢Ø±",
    "Baahubali": "Ø¨Ø§Ù‡ÙˆØ¨Ø§Ù„ÙŠ",
    "3 Idiots": "3 Ø£ØºØ¨ÙŠØ§Ø¡",
    "Dangal": "Ø¯Ø§Ù†ØºØ§Ù„",
    
    "KuruluÅŸ: Osman": "Ø§Ù„ØªØ£Ø³ÙŠØ³: Ø¹Ø«Ù…Ø§Ù†",
    "DiriliÅŸ: ErtuÄŸrul": "Ø§Ù„Ù‚ÙŠØ§Ù…Ø©: Ø£Ø±Ø·ØºØ±Ù„",
    
    "Attack on Titan": "Ù‡Ø¬ÙˆÙ… Ø§Ù„Ø¹Ù…Ø§Ù„Ù‚Ø©",
    "Demon Slayer": "Ù‚Ø§ØªÙ„ Ø§Ù„Ø´ÙŠØ§Ø·ÙŠÙ†",
    "Jujutsu Kaisen": "ÙƒØ§ÙŠØ³Ù† Ø§Ù„Ø¬ÙˆØ¬ÙˆØªØ³Ùˆ",
    "My Hero Academia": "Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØªÙŠ Ù„Ù„Ø£Ø¨Ø·Ø§Ù„",
    "Naruto": "Ù†Ø§Ø±ÙˆØªÙˆ",
    
    "Stranger Things": "Ø£Ø´ÙŠØ§Ø¡ ØºØ±ÙŠØ¨Ø©",
    "Game of Thrones": "Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¹Ø±ÙˆØ´",
    "Breaking Bad": "Ø¨Ø±ÙŠÙƒÙŠÙ†Ø¬ Ø¨Ø§Ø¯",
    "The Witcher": "Ø§Ù„ÙˆØ­Ø´",
    "Money Heist": "Ø³Ø±Ù‚Ø© Ø§Ù„Ù…Ø§Ù„",
    
    "Interstellar": "Ø¨ÙŠÙ† Ø§Ù„Ù†Ø¬ÙˆÙ…",
    "Inception": "Ø¨Ø¯Ø§ÙŠØ©",
    "The Dark Knight": "Ø§Ù„ÙØ§Ø±Ø³ Ø§Ù„Ù…Ø¸Ù„Ù…",
    "Parasite": "Ø§Ù„Ø·ÙÙŠÙ„ÙŠ",
    "Avengers": "Ø§Ù„Ù…Ù†ØªÙ‚Ù…ÙˆÙ†"
};

// Ø¯Ø§Ù„Ø© Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† Ø°ÙƒÙŠ Ù…Ø­Ø³Ù†Ø©
function getSmartTitle(item) {
    if (!item) return "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
    
    const originalLang = item.original_language || "en";
    const langConfig = LANGUAGE_CONFIG[originalLang] || LANGUAGE_CONFIG.default;
    
    let title = item.title || item.name || item.original_title || item.original_name || "";
    
    // PRIORITY FOR KOREAN CONTENT - ARABIC FIRST
    if (originalLang === "ko") {
        if (TITLE_TRANSLATIONS[title]) {
            return TITLE_TRANSLATIONS[title];
        }
        return title || "Ø¹Ù†ÙˆØ§Ù† ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
    }
    
    // Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø¹ Fallback Ù…Ø­Ø³Ù†
    if (langConfig.displayLang === "romanji") {
        return TITLE_TRANSLATIONS[title] || title || "Ø¹Ù†ÙˆØ§Ù† ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
    } else if (langConfig.isArabicTitle) {
        const arabicTitle = TITLE_TRANSLATIONS[title];
        return arabicTitle || title || "Ø¹Ù†ÙˆØ§Ù† ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
    } else {
        return title || "Ø¹Ù†ÙˆØ§Ù† ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
    }
}

// ===== Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø³ÙŠØ±ÙØ±Ø§Øª =====
const DEFAULT_SERVERS = {
    streaming: [
        { name: "Ø³ÙŠØ±ÙØ± 1", url: "#", quality: "HD" },
        { name: "Ø³ÙŠØ±ÙØ± 2", url: "#", quality: "FHD" },
        { name: "Ø³ÙŠØ±ÙØ± 3", url: "#", quality: "4K" },
        { name: "Ø³ÙŠØ±ÙØ± 4", url: "#", quality: "HD" }
    ],
    download: [
        { name: "Ø¬ÙˆØ¬Ù„ Ø¯Ø±Ø§ÙŠÙ", url: "#", quality: "1080p", size: "2.1 GB" },
        { name: "Ù…ÙŠØ¬Ø§", url: "#", quality: "720p", size: "1.5 GB" },
        { name: "Ù…ÙŠØ¯ÙŠØ§ ÙØ§ÙŠØ±", url: "#", quality: "480p", size: "800 MB" },
        { name: "ØªØ­Ù…ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±", url: "#", quality: "1080p", size: "2.3 GB" }
    ]
};

// ===== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© =====
let episodesData = [];
let seasonsData = [];
let isReverseOrder = false;
let isDropdownOpen = false;

// ===== Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…Ø®ØªÙ„ÙØ© Ù…Ø¹ ØªØ­Ø³ÙŠÙ† Ø§Ù„ØµÙˆØ± =====
async function fetchMediaDetails() {
    let data = null;
    
    try {
        // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: TMDB (API Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ) - Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© + Ø§Ù„ØµÙˆØ± Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
        const tmdbResponse = await fetch(
            `https://api.themoviedb.org/3/${mediaType}/${mediaId}?api_key=${TMDB_KEY}&language=ar&include_image_language=ar,null&append_to_response=videos,credits,similar,external_ids`
        );
        
        if (tmdbResponse.ok) {
            data = await tmdbResponse.json();
            
            // ØªØ·Ø¨ÙŠÙ‚ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø°ÙƒÙŠØ©
            data.smartTitle = getSmartTitle(data);
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø³Ù„Ø³Ù„ØŒ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø³Ù…
            if (mediaType === 'tv' || mediaType === 'anime') {
                const seasonsResponse = await fetch(
                    `https://api.themoviedb.org/3/tv/${mediaId}?api_key=${TMDB_KEY}&language=ar&include_image_language=ar,null`
                );
                if (seasonsResponse.ok) {
                    const tvData = await seasonsResponse.json();
                    seasonsData = tvData.seasons || [];
                    
                    // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ù„Ù‚Ø§Øª Ø§Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ø£ÙˆÙ„
                    if (seasonsData.length > 0) {
                        const seasonNumber = seasonsData[0].season_number;
                        const episodesResponse = await fetch(
                            `https://api.themoviedb.org/3/tv/${mediaId}/season/${seasonNumber}?api_key=${TMDB_KEY}&language=ar&include_image_language=ar,null`
                        );
                        if (episodesResponse.ok) {
                            const episodesDataResp = await episodesResponse.json();
                            episodesData = episodesDataResp.episodes || [];
                            
                            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø°ÙƒÙŠØ© Ù„Ù„Ø­Ù„Ù‚Ø§Øª
                            episodesData.forEach(episode => {
                                episode.smartTitle = getSmartTitle(episode);
                            });
                        }
                    }
                }
            }
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
            if (isDataComplete(data)) {
                return data;
            }
        }
    } catch (error) {
        console.log("TMDB API Error:", error);
    }
    
    // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: OMDB API (API Ø§Ø­ØªÙŠØ§Ø·ÙŠ)
    if (!data || !isDataComplete(data)) {
        try {
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ø±Ù‘Ù IMDB Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø°Ø§ Ù…ÙˆØ¬ÙˆØ¯
            const imdbId = data?.external_ids?.imdb_id || await getImdbId(mediaId, mediaType);
            
            if (imdbId) {
                const omdbResponse = await fetch(
                    `https://www.omdbapi.com/?i=${imdbId}&apikey=${OMDB_KEY}&plot=full`
                );
                
                if (omdbResponse.ok) {
                    const omdbData = await omdbResponse.json();
                    
                    if (omdbData.Response === "True") {
                        // Ø¯Ù…Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª TMDB
                        data = mergeData(data, omdbData);
                        data.smartTitle = getSmartTitle(data);
                    }
                }
            }
        } catch (error) {
            console.log("OMDB API Error:", error);
        }
    }
    
    // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: API Ø§Ù„Ø®Ø§Øµ (API Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ø«Ø§Ù†ÙˆÙŠ)
    if (!data || !isDataComplete(data)) {
        try {
            const customResponse = await fetch(
                `https://api.themoviedb.org/3/${mediaType}/${mediaId}?api_key=${CUSTOM_API_KEY}&language=ar&include_image_language=ar,null&append_to_response=videos,credits,similar`
            );
            
            if (customResponse.ok) {
                const customData = await customResponse.json();
                data = mergeData(data, customData);
                data.smartTitle = getSmartTitle(data);
            }
        } catch (error) {
            console.log("Custom API Error:", error);
        }
    }
    
    // Ø¥Ø°Ø§ ÙØ´Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§ØªØŒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
    if (!data) {
        data = await getFallbackData();
        data.smartTitle = getSmartTitle(data);
    }
    
    return data;
}

// ===== Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© =====
// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
function isDataComplete(data) {
    return data && 
           (data.title || data.name) &&
           data.overview &&
           (data.poster_path || data.backdrop_path) &&
           (data.release_date || data.first_air_date);
}

// Ø¯Ù…Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…ØµØ§Ø¯Ø± Ù…Ø®ØªÙ„ÙØ©
function mergeData(tmdbData, otherData) {
    if (!tmdbData) return otherData;
    if (!otherData) return tmdbData;
    
    return {
        ...tmdbData,
        title: tmdbData.title || otherData.Title || tmdbData.name,
        name: tmdbData.name || otherData.Title || tmdbData.title,
        overview: tmdbData.overview || otherData.Plot || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ Ù…ØªÙˆÙØ±",
        poster_path: tmdbData.poster_path || otherData.Poster || null,
        backdrop_path: tmdbData.backdrop_path || null,
        release_date: tmdbData.release_date || otherData.Released || tmdbData.first_air_date,
        first_air_date: tmdbData.first_air_date || otherData.Released || tmdbData.release_date,
        vote_average: tmdbData.vote_average || parseFloat(otherData.imdbRating) || 0,
        runtime: tmdbData.runtime || parseInt(otherData.Runtime) || 0,
        genres: tmdbData.genres || (otherData.Genre ? [{ name: otherData.Genre }] : []),
        imdb_id: tmdbData.imdb_id || otherData.imdbID || null
    };
}

// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ø±Ù‘Ù IMDB
async function getImdbId(tmdbId, type) {
    try {
        const response = await fetch(
            `https://api.themoviedb.org/3/${type}/${tmdbId}/external_ids?api_key=${TMDB_KEY}`
        );
        if (response.ok) {
            const data = await response.json();
            return data.imdb_id;
        }
    } catch (error) {
        console.log("Error fetching IMDB ID:", error);
    }
    return null;
}

// Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø·ÙˆØ§Ø±Ø¦
async function getFallbackData() {
    const isMovie = mediaType === 'movie';
    const title = isMovie ? "ÙÙŠÙ„Ù… ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ" : "Ù…Ø³Ù„Ø³Ù„ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
    
    return {
        title: title,
        name: title,
        overview: "Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ Ù…ØªÙˆÙØ± Ø­Ø§Ù„ÙŠÙ‹Ø§. Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø±ÙŠØ¨Ù‹Ø§.",
        poster_path: null,
        backdrop_path: null,
        release_date: "2024-01-01",
        first_air_date: "2024-01-01",
        vote_average: 0,
        runtime: 120,
        genres: [{ name: "Ø¯Ø±Ø§Ù…Ø§" }, { name: "ØªØ´ÙˆÙŠÙ‚" }],
        videos: { results: [] },
        similar: { results: [] }
    };
}

// ===== Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª =====
async function displayMediaDetails() {
    if (!mediaId) {
        window.location.href = 'index.html';
        return;
    }
    
    const data = await fetchMediaDetails();
    
    if (!data) {
        document.body.innerHTML = `
            <div style="text-align:center; padding:100px; color:#ff3b3b;">
                <h1>âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h1>
                <p>ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ø§Ù‹</p>
                <a href="index.html" style="color:#ff3b3b; text-decoration:none;">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            </div>
        `;
        return;
    }
    
    // ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
    const isMovie = mediaType === 'movie';
    const isSeries = mediaType === 'tv' || mediaType === 'anime';
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø§Ø±Ø©
    document.getElementById('type-badge').textContent = 
        isMovie ? 'ÙÙŠÙ„Ù…' : 
        mediaType === 'anime' ? 'Ø£Ù†Ù…ÙŠ' : 'Ù…Ø³Ù„Ø³Ù„';
    
    // Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒÙŠ)
    const smartTitle = data.smartTitle || data.title || data.name || data.original_title || data.original_name || "Ø¹Ù†ÙˆØ§Ù† ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
    document.getElementById('detail-title').textContent = smartTitle;
    
    // ØªØ­Ø¯ÙŠØ« Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ØµÙØ­Ø©
    document.title = `${smartTitle} | TAFLIM`;
    
    // Ø§Ù„Ø¨ÙˆØ³ØªØ± Ù…Ø¹ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù„Ù„ØµÙˆØ± Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
    let posterUrl = 'https://via.placeholder.com/300x450/1a1f25/888888?text=No+Poster';
    if (data.poster_path) {
        posterUrl = `${IMAGE_BASE}${data.poster_path}`;
    } else if (data.backdrop_path) {
        posterUrl = `https://image.tmdb.org/t/p/w780${data.backdrop_path}`;
    }
    document.getElementById('detail-poster').src = posterUrl;
    document.getElementById('detail-poster').onerror = function() {
        this.src = 'https://via.placeholder.com/300x450/1a1f25/888888?text=No+Poster';
    };
    
    // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØµÙÙŠØ©
    const metaContainer = document.getElementById('detail-meta');
    const year = data.release_date?.split('-')[0] || 
                data.first_air_date?.split('-')[0] || 
                data.Released?.split(' ')[2] || 
                'N/A';
    
    const rating = data.vote_average ? data.vote_average.toFixed(1) : 
                  (data.imdbRating || 'N/A');
    
    const runtime = isMovie ? 
                   `${data.runtime || data.Runtime?.split(' ')[0] || 120} Ø¯Ù‚ÙŠÙ‚Ø©` : 
                   '';
    
    let genres = "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ";
    if (data.genres && data.genres.length > 0) {
        genres = data.genres.map(g => g.name).join('ØŒ ');
    } else if (data.Genre) {
        genres = data.Genre;
    }
    
    metaContainer.innerHTML = `
        <div class="meta-item">
            <span class="rating">â­ ${rating}/10</span>
        </div>
        <div class="meta-item">ğŸ“… ${year}</div>
        ${runtime ? `<div class="meta-item">â±ï¸ ${runtime}</div>` : ''}
        <div class="meta-item">ğŸ­ ${genres}</div>
    `;
    
    // Ø§Ù„ÙˆØµÙ (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)
    const description = data.overview || 
                       data.Plot || 
                       'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ Ù…ØªÙˆÙØ± Ø­Ø§Ù„ÙŠØ§Ù‹.';
    document.getElementById('detail-description').textContent = description;
    
    // Ø§Ù„ØªØ±ÙŠÙ„Ø±
    const trailer = data.videos?.results?.find(v => 
        v.type === 'Trailer' && v.site === 'YouTube'
    );
    
    if (trailer) {
        document.getElementById('trailer-iframe').src = 
            `https://www.youtube.com/embed/${trailer.key}?rel=0&modestbranding=1`;
    } else {
        document.querySelector('.trailer-container').innerHTML = `
            <div style="position:absolute; top:0; right:0; width:100%; height:100%; 
                       display:flex; align-items:center; justify-content:center; 
                       background:#000; color:#888;">
                <p>Ù„Ø§ ÙŠØªÙˆÙØ± ØªØ±ÙŠÙ„Ø± Ø­Ø§Ù„ÙŠØ§Ù‹</p>
            </div>
        `;
    }
    
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
    setupServersDropdown();
    
    // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
    if (isMovie) {
        // ÙÙŠÙ„Ù…: Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø³Ù… Ø§Ù„ØªØ­Ù…ÙŠÙ„
        document.getElementById('movie-download-section').style.display = 'block';
        
        // Ø¥Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØ­Ù…ÙŠÙ„
        const downloadOptions = document.getElementById('download-options');
        downloadOptions.innerHTML = '';
        DEFAULT_SERVERS.download.forEach(option => {
            const card = document.createElement('div');
            card.className = 'download-card';
            card.innerHTML = `
                <span class="quality-badge">${option.quality}</span>
                <h4>${option.name}</h4>
                <p style="color:#888; margin:10px 0;">Ø§Ù„Ø­Ø¬Ù…: ${option.size}</p>
                <button class="server-action-btn" onclick="window.open('${option.url}', '_blank')">
                    â¬‡ ØªØ­Ù…ÙŠÙ„
                </button>
            `;
            downloadOptions.appendChild(card);
        });
    } else if (isSeries) {
        // Ù…Ø³Ù„Ø³Ù„/Ø£Ù†Ù…ÙŠ: Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø³Ù… Ø§Ù„Ø­Ù„Ù‚Ø§Øª
        document.getElementById('episodes-section').style.display = 'block';
        
        // Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø³Ù… Ø§Ù„Ù…ÙˆØ§Ø³Ù… Ø§Ù„Ø£Ø®Ø±Ù‰ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
        if (seasonsData && seasonsData.length > 1) {
            document.getElementById('other-seasons-section').style.display = 'block';
            await displayOtherSeasons();
        }
        
        // Ø¬Ù„Ø¨ ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø­Ù„Ù‚Ø§Øª
        await displayEpisodesList();
    }
    
    // Ø¬Ù„Ø¨ Ø§Ù„ØªÙˆØµÙŠØ§Øª
    await displayRecommendations(data.similar?.results || []);
    
    // Ø¥Ø¶Ø§ÙØ© Ø£Ø­Ø¯Ø§Ø« Ù„Ù„Ø£Ø²Ø±Ø§Ø±
    setupEventListeners();
}

// ===== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª =====
// Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
function setupServersDropdown() {
    const serversList = document.getElementById('servers-list');
    const dropdown = document.getElementById('servers-dropdown');
    
    serversList.innerHTML = '';
    DEFAULT_SERVERS.streaming.forEach(server => {
        const serverItem = document.createElement('div');
        serverItem.className = 'server-item';
        serverItem.innerHTML = `
            <div class="server-info">
                <span class="server-quality">${server.quality}</span>
                <span class="server-name">${server.name}</span>
            </div>
            <button class="server-action-btn" onclick="openServer('${server.url}')">
                ØªØ´ØºÙŠÙ„
            </button>
        `;
        serversList.appendChild(serverItem);
    });
    
    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
    document.addEventListener('click', (e) => {
        if (isDropdownOpen && !dropdown.contains(e.target) && e.target.id !== 'watch-btn') {
            dropdown.classList.remove('active');
            isDropdownOpen = false;
        }
    });
}

// ÙØªØ­ Ø³ÙŠØ±ÙØ±
function openServer(url) {
    window.open(url, '_blank');
    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
    document.getElementById('servers-dropdown').classList.remove('active');
    isDropdownOpen = false;
}

// ===== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ù„Ù‚Ø§Øª =====
// Ø¹Ø±Ø¶ Ø§Ù„Ø­Ù„Ù‚Ø§Øª ÙƒÙ‚Ø§Ø¦Ù…Ø©
async function displayEpisodesList() {
    const episodesListContainer = document.getElementById('episodes-list');
    episodesListContainer.innerHTML = '';
    
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø© Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
    let episodes = episodesData || [];
    
    if (episodes.length === 0) {
        // Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        for (let i = 1; i <= 12; i++) {
            episodes.push({
                episode_number: i,
                name: `Ø§Ù„Ø­Ù„Ù‚Ø© ${i}`,
                overview: `ÙˆØµÙ Ù„Ù„Ø­Ù„Ù‚Ø© ${i} Ù…Ù† Ø§Ù„Ù…Ø³Ù„Ø³Ù„`,
                still_path: null,
                runtime: 45,
                air_date: '2024-01-01',
                season_number: 1,
                smartTitle: `Ø§Ù„Ø­Ù„Ù‚Ø© ${i}`
            });
        }
    }
    
    // Ø¹Ø±Ø¶ Ø§Ù„Ø­Ù„Ù‚Ø§Øª
    episodes.forEach(episode => {
        const episodeItem = createEpisodeListItem(episode);
        episodesListContainer.appendChild(episodeItem);
    });
    
    // Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« Ù„Ø¹ÙƒØ³ Ø§Ù„ØªØ±ØªÙŠØ¨
    document.getElementById('reverse-order-btn').addEventListener('click', () => {
        isReverseOrder = !isReverseOrder;
        reverseEpisodesOrder();
        updateReverseOrderButton();
    });
    
    // ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø¹ÙƒØ³ Ø§Ù„ØªØ±ØªÙŠØ¨
    updateReverseOrderButton();
    
    // Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ø´Ø± Ø§Ù„ØªÙ…Ø±ÙŠØ±
    setupScrollIndicator();
}

// ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø¹ÙƒØ³ Ø§Ù„ØªØ±ØªÙŠØ¨
function updateReverseOrderButton() {
    const icon = document.querySelector('#reverse-order-btn i');
    
    if (isReverseOrder) {
        icon.className = 'fas fa-sort-amount-up fa-lg';
        icon.title = "Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø£ØµÙ„ÙŠ";
    } else {
        icon.className = 'fas fa-sort-amount-down fa-lg';
        icon.title = "Ø¹ÙƒØ³ Ø§Ù„ØªØ±ØªÙŠØ¨";
    }
}

// Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù†ØµØ± Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ø­Ù„Ù‚Ø©
function createEpisodeListItem(episode) {
    const div = document.createElement('div');
    div.className = 'episode-list-item';
    div.dataset.episodeNumber = episode.episode_number;
    div.dataset.episodeId = episode.id;
    
    // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø«
    const airDate = episode.air_date ? new Date(episode.air_date) : null;
    const dateString = airDate ? airDate.toLocaleDateString('ar-EG') : 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
    
    // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø°ÙƒÙŠ Ù„Ù„Ø­Ù„Ù‚Ø©
    const episodeTitle = episode.smartTitle || episode.name || `Ø§Ù„Ø­Ù„Ù‚Ø© ${episode.episode_number}`;
    
    div.innerHTML = `
        <div class="episode-number">Ø§Ù„Ø­Ù„Ù‚Ø© ${episode.episode_number}</div>
        <div class="episode-title">${episodeTitle}</div>
        <div class="episode-meta">
            <span>â±ï¸ ${episode.runtime || 45} Ø¯Ù‚ÙŠÙ‚Ø©</span>
            <span> | ğŸ“… ${dateString}</span>
        </div>
    `;
    
    // Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« Ø§Ù„Ù†Ù‚Ø±
    div.addEventListener('click', () => {
        // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø· Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù„Ù‚Ø§Øª
        document.querySelectorAll('.episode-list-item').forEach(item => {
            item.classList.remove('active');
        });
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ø´Ø· Ù„Ù„Ø­Ù„Ù‚Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
        div.classList.add('active');
        
        // ÙØªØ­ Ø§Ù„Ø­Ù„Ù‚Ø©
        openEpisode(episode);
    });
    
    return div;
}

// Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ø³Ù… Ø§Ù„Ø£Ø®Ø±Ù‰
async function displayOtherSeasons() {
    const seasonsGrid = document.getElementById('seasons-grid');
    seasonsGrid.innerHTML = '';
    
    // ØªØµÙÙŠØ© Ø§Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø§Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ø£ÙˆÙ„ Ø¹Ø§Ø¯Ø©)
    const otherSeasons = seasonsData.filter(season => season.season_number > 1);
    
    if (otherSeasons.length === 0) {
        seasonsGrid.innerHTML = '<p style="grid-column:1/-1; text-align:center; color:#888;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ÙˆØ§Ø³Ù… Ø£Ø®Ø±Ù‰</p>';
        return;
    }
    
    otherSeasons.forEach(season => {
        const seasonCard = document.createElement('a');
        seasonCard.className = 'season-card';
        seasonCard.href = `details.html?type=${mediaType}&id=${mediaId}&season=${season.season_number}`;
        
        const posterUrl = season.poster_path ? 
            `${IMAGE_BASE}${season.poster_path}` : 
            'https://via.placeholder.com/180x250/1a1f25/888888?text=Season+' + season.season_number;
        
        const airYear = season.air_date ? new Date(season.air_date).getFullYear() : 'N/A';
        
        seasonCard.innerHTML = `
            <img src="${posterUrl}" alt="Ø§Ù„Ù…ÙˆØ³Ù… ${season.season_number}" loading="lazy">
            <div class="season-info">
                <div class="season-title">Ø§Ù„Ù…ÙˆØ³Ù… ${season.season_number}</div>
                <div class="season-meta">
                    <span>${season.episode_count} Ø­Ù„Ù‚Ø©</span>
                    <span> | ğŸ“… ${airYear}</span>
                </div>
            </div>
        `;
        
        seasonsGrid.appendChild(seasonCard);
    });
}

// Ø¹ÙƒØ³ ØªØ±ØªÙŠØ¨ Ø§Ù„Ø­Ù„Ù‚Ø§Øª
function reverseEpisodesOrder() {
    const episodesListContainer = document.getElementById('episodes-list');
    const episodes = Array.from(episodesListContainer.children);
    
    // Ø¹ÙƒØ³ ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…ØµÙÙˆÙØ©
    episodes.reverse();
    
    // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯
    episodesListContainer.innerHTML = '';
    episodes.forEach(episode => {
        episodesListContainer.appendChild(episode);
    });
}

// ÙØªØ­ ØµÙØ­Ø© Ø§Ù„Ø­Ù„Ù‚Ø©
function openEpisode(episode) {
    // ÙØªØ­ ØµÙØ­Ø© Ø§Ù„Ø­Ù„Ù‚Ø©
    window.open(`episode.html?type=${mediaType}&id=${mediaId}&season=${episode.season_number}&episode=${episode.episode_number}`, '_blank');
}

// Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¤Ø´Ø± Ø§Ù„ØªÙ…Ø±ÙŠØ±
function setupScrollIndicator() {
    const episodesContainer = document.querySelector('.episodes-list-container');
    const scrollIndicator = document.getElementById('scroll-indicator');
    
    if (episodesContainer) {
        episodesContainer.addEventListener('scroll', () => {
            const scrollTop = episodesContainer.scrollTop;
            const scrollHeight = episodesContainer.scrollHeight;
            const clientHeight = episodesContainer.clientHeight;
            
            // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø§Ù„Ù…Ø¤Ø´Ø±
            if (scrollTop === 0) {
                scrollIndicator.textContent = 'Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©';
            } else if (scrollTop + clientHeight >= scrollHeight - 10) {
                scrollIndicator.textContent = 'Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©';
            } else {
                scrollIndicator.textContent = 'Ø§Ø³Ø­Ø¨ Ù„Ø£Ø¹Ù„Ù‰/Ø£Ø³ÙÙ„ Ù„Ù„ØªØµÙØ­';
            }
        });
    }
}

// ===== Ø§Ù„ØªÙˆØµÙŠØ§Øª =====
// Ø¹Ø±Ø¶ Ø§Ù„ØªÙˆØµÙŠØ§Øª
async function displayRecommendations(recommendations) {
    const grid = document.getElementById('recommendations-grid');
    grid.innerHTML = '';
    
    if (!recommendations || recommendations.length === 0) {
        grid.innerHTML = '<p style="grid-column:1/-1; text-align:center; color:#888;">Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙˆØµÙŠØ§Øª Ù…ØªØ§Ø­Ø©</p>';
        return;
    }
    
    // Ø¹Ø±Ø¶ Ø£ÙˆÙ„ 6 ØªÙˆØµÙŠØ§Øª ÙÙ‚Ø·
    const limitedRecs = recommendations.slice(0, 6);
    
    for (const item of limitedRecs) {
        const card = document.createElement('a');
        card.className = 'rec-card';
        card.href = `details.html?type=${mediaType}&id=${item.id}`;
        
        const poster = item.poster_path ? 
            `${IMAGE_BASE}${item.poster_path}` : 
            'https://via.placeholder.com/160x200/1a1f25/888888?text=No+Poster';
        
        // ØªØ·Ø¨ÙŠÙ‚ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø°ÙƒÙŠØ© Ù„Ù„ØªÙˆØµÙŠØ§Øª
        const smartRecTitle = getSmartTitle(item);
        
        card.innerHTML = `
            <img src="${poster}" alt="${smartRecTitle}" loading="lazy"
                 onerror="this.src='https://via.placeholder.com/160x200/1a1f25/888888?text=No+Poster'">
            <div class="rec-info">
                <div class="rec-title">${smartRecTitle}</div>
                <div style="color:#888; font-size:0.9rem;">
                    â­ ${item.vote_average ? item.vote_average.toFixed(1) : 'N/A'}
                </div>
            </div>
        `;
        
        grid.appendChild(card);
    }
}

// ===== Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø± =====
// Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
function setupEventListeners() {
    const isMovie = mediaType === 'movie';
    const isSeries = mediaType === 'tv' || mediaType === 'anime';
    const dropdown = document.getElementById('servers-dropdown');
    
    // Ø²Ø± Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©
    document.getElementById('watch-btn').addEventListener('click', (e) => {
        if (isMovie) {
            // Ù„Ù„Ø£ÙÙ„Ø§Ù…: ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ±ÙØ±Ø§Øª Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
            e.stopPropagation();
            isDropdownOpen = !isDropdownOpen;
            dropdown.classList.toggle('active');
        } else {
            // Ù„Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª ÙˆØ§Ù„Ø£Ù†Ù…ÙŠ: Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù‚Ø³Ù… Ø§Ù„Ø­Ù„Ù‚Ø§Øª
            document.getElementById('episodes-section').scrollIntoView({
                behavior: 'smooth'
            });
        }
    });
    
    // Ø²Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
    document.getElementById('download-btn').addEventListener('click', () => {
        if (isMovie) {
            // Ù„Ù„Ø£ÙÙ„Ø§Ù…: Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù‚Ø³Ù… Ø§Ù„ØªØ­Ù…ÙŠÙ„
            document.getElementById('movie-download-section').scrollIntoView({
                behavior: 'smooth'
            });
        } else {
            // Ù„Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª ÙˆØ§Ù„Ø£Ù†Ù…ÙŠ: Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù‚Ø³Ù… Ø§Ù„Ø­Ù„Ù‚Ø§Øª
            document.getElementById('episodes-section').scrollIntoView({
                behavior: 'smooth'
            });
        }
    });
    
    // Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ
    document.querySelector('.logo').addEventListener('click', () => {
        window.location.href = 'index.html';
    });
}

// ===== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© =====
// Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
document.addEventListener('DOMContentLoaded', () => {
    if (!mediaId) {
        window.location.href = 'index.html';
        return;
    }
    
    displayMediaDetails();
});
    </script>
</body>
</html>